---
style: ocean
---
# 词法化

> 词法化的过程会对源代码中的字符进行检查,如果是有状态的解析过程,还会赋予单词语义

## 词法作用域

- 词法作用域就是定义在词法阶段的作用域,换句话说,词法作用域是由你在写代码时将变量和块作用域写在哪里来决定的,因此当词法分析器处理代码时会保持作用域不变(大部分情况下是这样的)

## 查找

- 作用域气泡的结构和互相之间的位置关系给引擎提供了足够的位置信息,引擎用这些信息来查找标识符的位置

- 遮蔽效果 全局变量会变成全局对象的属性(如浏览器中的window)在当前作用域可以使用window.a来获取同名的全局变量,但是非全局的变量如果被遮蔽了,无论如何都不可以访问到

## 2.2欺骗词法

- 怎么在运行中"修改"(也可以说欺骗)词法作用域呢

  > javascript中有两种机制(欺骗词法作用域会导致性能下降)

  > > 机制一原理:

  > > > eval

  > > > > javascript的eval函数 可以在运行时修改词法作用域 可执行动态代码但是在严格模式中,eval有自己的作用域,不可修改书写期的词法作用域,javascript还有一些功能和效果和eval很类似.setTimeout(...)和setInterval(...)的第一个参数可以是字符串,字符串的内容可以被解释为一段动态生成的函数代码,这些功能已经过时且并不被提倡.在程序中动态生成代码使用场景非常罕见,因为它所带来的好处无法抵消性能上的损失.

  > > 机制二原理

  > > > with关键字

  > > > > with解释:它如何同被它所影响的词法作用域进行交互,详情看书19业

## 性能

> 当代码中拥有大量如此作法,javascript引擎所做的优化将大幅降低
