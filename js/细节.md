# 细节

- 对存在的节点进行添加操作会改变元素的位置(移动到最后)

- dom和html相互影响的前提是 属性为标准属性(如用js给元素加一个自定义的属性 并不会影响html结构反过来也一样)

- 获取css属性时,判断浏览器是否支持getconpytedstyle() 或者 currentstyle()

- 紧跟数字后面的点解析为小数点 如20.toFixed(2); 会报错,(20).tofixed(2);已解决问题

- ie8/9需要开启devlop tools 才会初始化console对象,所以发布版本的时候最好把所有的console.log();函数关闭

## 直接影响页面性能
- 事件数量
- DOM节点频繁操作
- 请求数量

##常见兼容写法

1. 事件监听器的绑定和解除
  ```javascript
  if (ele.addEventListener) {
    ele.addEventListener('Eventtype',function(e){},false);
    ele.removeListener('Eventtype',funObj,false);
  }else {
    //ie8
    ele.attachEvent("on+eventType",fn)
    ele.detachEvent("on+eventType",fnobj);
  }
  ```

2. 事件对象
  ```javascript
    e = e || window.event //ie8
  ```

3. 事件源对象
  ```javascript
    var target=e.target || e.srcElement //ie8
  ```
4. 阻止默认事件
  ```javascript
    e.preventDefault();
    //ie8
    e.returnValue = false;
  ```

5. 阻止事件冒泡
  ```javascript
    e.stoppropagation();
    //ie8
    e.cancelBubble= ture;
  ```
6. 获取元素的css属性
  ```javascript
    //基本浏览器
    var style=ele.getComputedStyle();//掉用方法返回对象
    //ie8
    var style=ele.currentStyle;//返回的是一个对象
  ```
7. 获取上一个和下一个元素
  ```javascript
    //两者基本浏览器都支持且不包含空文本,但ie8下的不支持前者;
    //ie9加后者包含空文本,ie8- 后者不包含空文本,所以顺序不能乱
    var sib=ele.previousElementSibling||elem.previousSibling;
    var next=ele.nextElementSibling|| ele.nextSibling;
  ```
8. 获取子元素
  ```javascript
    var son=ele.childNodes  || ele.children
  ```

## 复制对象
1. for in 遍历对象复制
2. Object.assign({},obj);
3. JSON
4. 递归?

- 基本数据类型为什么可以跟对象一样使用方法
  - 当基本数据执行方法时经历以下几步
    1. 自动创建一个字符串对象
    ```javascript
      var s = new String(str);
    ```
    2. 调用对象方法
    ```javascript
      s.indexOf()
    ```
    3. 清楚对象
    ```javascript
      delete s
    ```

## Ajax兼容性
  ```javascript
    var req = null;
    try {
      req = new XMLHttpRequest();
    } catch (e) {
      //ie低版本有两种实现异步请求的实现
      try {
        req = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        try {
          req = new ActiveXObject("Microsoft.XMLHTTP");

        } catch (e) {

        }
      }
    }
  ```
  
